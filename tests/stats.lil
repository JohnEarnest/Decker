# test fixture for the stats module
stats:import["examples/decks/stats.deck"].stats

on assert x y do
 a:"%J" format x
 b:"%J" format y
 if !a~b
  print["error\ngot:       %s\nexpected:  %s" a b]
  exit[0]
 end
end

d1:73,75,86,86,86,89,95,99,100
d2:73,75,86,86,86,88,89,95,99,100
d3:7,7,31,31,47,75,87,115,116,119,119,155,177
assert[stats.mean     [()]                 nil]
assert[stats.mean     [list 55]             55]
assert[stats.mean     [1,2,2,3,4,7,9]        4]
assert[stats.median   [()]                 nil]
assert[stats.median   [list 55]             55]
assert[stats.median   [1,3,3,6,7,8,9]        6]
assert[stats.median   [1,2,3,4,5,6,8,9]    4.5]
assert[stats.median   [d1]                  86]
assert[stats.median   [d2]                  87]
assert[stats.mode     [()]                 nil]
assert[stats.mode     [list 55]             55]
assert[stats.mode     [1,2,2,3,4,7,9]        2]
assert[stats.midrange [()]                   0]
assert[stats.midrange [1,2,2,3,4,7,9]        5]
assert[stats.quartiles[d3]         (31,87,119)]
assert[stats.std_dev  [()]                 nil]
assert[stats.std_dev  [list 55]            nil]
assert[stats.std_dev  [d2]            8.944893]
assert[stats.std_dev  [d3]           55.570699]
assert[stats.skewness [()]                 nil]
assert[stats.skewness [list 55]            nil]
assert[stats.skewness [d2]           -0.299757]
assert[stats.skewness [d3]            0.057225]
assert[stats.kurtosis [()]                 nil]
assert[stats.kurtosis [list 55]            nil]
assert[stats.kurtosis [d2]           -0.426448]
assert[stats.kurtosis [d3]           -1.132579]
assert[stats.pstd_dev [()]                 nil]
assert[stats.pstd_dev [list 55]            nil]
assert[stats.pstd_dev [d2]            8.485871]
assert[stats.pstd_dev [d3]           53.390600]
assert[stats.pskewness[()]                 nil]
assert[stats.pskewness[list 55]            nil]
assert[stats.pskewness[d2]           -0.252777]
assert[stats.pskewness[d3]            0.050398]
assert[stats.pkurtosis[()]                 nil]
assert[stats.pkurtosis[list 55]            nil]
assert[stats.pkurtosis[d2]           -0.786678]
assert[stats.pkurtosis[d3]           -1.170141]

print["all tests passed."]
